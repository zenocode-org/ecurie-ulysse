---
import Button from "./Button.astro";

export interface Props {
  className?: string;
}

const { className = "" } = Astro.props;
---

<form
  class={`space-y-6 ${className}`}
  method="POST"
  action="/api/contact"
  id="contact-form"
>
  <div>
    <label
      for="email"
      class="block text-sm font-medium mb-2 text-accent dark:text-accent-light"
    >
      Email <span class="text-primary-500">*</span>
    </label>
    <input
      type="email"
      id="email"
      name="email"
      required
      class="w-full px-4 py-3 border border-box-border rounded-lg bg-box-bg dark:bg-base-dark-800 text-accent dark:text-accent-light focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
      placeholder="votre.email@exemple.fr"
    />
  </div>

  <div>
    <label
      for="name"
      class="block text-sm font-medium mb-2 text-accent dark:text-accent-light"
    >
      Nom <span class="text-primary-500">*</span>
    </label>
    <input
      type="text"
      id="name"
      name="name"
      required
      class="w-full px-4 py-3 border border-box-border rounded-lg bg-box-bg dark:bg-base-dark-800 text-accent dark:text-accent-light focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
      placeholder="Votre nom"
    />
  </div>

  <div>
    <label
      for="phone"
      class="block text-sm font-medium mb-2 text-accent dark:text-accent-light"
    >
      Téléphone
    </label>
    <input
      type="tel"
      id="phone"
      name="phone"
      class="w-full px-4 py-3 border border-box-border rounded-lg bg-box-bg dark:bg-base-dark-800 text-accent dark:text-accent-light focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"
      placeholder="06 12 34 56 78"
    />
  </div>

  <div>
    <label
      for="message"
      class="block text-sm font-medium mb-2 text-accent dark:text-accent-light"
    >
      Message <span class="text-primary-500">*</span>
    </label>
    <textarea
      id="message"
      name="message"
      required
      maxlength="500"
      rows="5"
      class="w-full px-4 py-3 border border-box-border rounded-lg bg-box-bg dark:bg-base-dark-800 text-accent dark:text-accent-light focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all resize-none"
      placeholder="Votre message (max 500 caractères)"
    ></textarea>
    <p class="text-sm text-accent-600 dark:text-accent-300 mt-1">
      <span id="char-count">0</span> / 500 caractères
    </p>
  </div>

  <Button type="submit" color="primary" variant="solid" className="w-full">
    Envoyer
  </Button>
</form>

<script>
  const form = document.getElementById("contact-form");
  const messageField = document.getElementById("message") as HTMLTextAreaElement;
  const charCount = document.getElementById("char-count");

  if (messageField && charCount) {
    messageField.addEventListener("input", () => {
      const count = messageField.value.length;
      charCount.textContent = count.toString();
      if (count > 500) {
        charCount.classList.add("text-red-500");
      } else {
        charCount.classList.remove("text-red-500");
      }
    });
  }

  if (form) {
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      // Form submission will be handled by backend
      // For now, just show a message
      alert("Formulaire soumis! (Backend à configurer)");
    });
  }
</script>


